<!DOCTYPE html>
<html lang="en">

<head>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-app.js";
    import { getAuth, signInWithPopup, signInWithRedirect, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-auth.js";
  
    const firebaseConfig = {
    apiKey: "AIzaSyCcn2QX1ZxGJ2savhtNRn_zrs7yFuIeNJk",
    authDomain: "fronted-47617.firebaseapp.com",
    projectId: "fronted-47617",
    storageBucket: "fronted-47617.firebasestorage.app",
    messagingSenderId: "832312152835",
    appId: "1:832312152835:web:fa0e5b0b49171fcd36cf36"
  };

  
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const provider = new GoogleAuthProvider();
    function isRunningInWebView() {
    const userAgent = navigator.userAgent || navigator.vendor || window.opera; //chequea que tipo de disposito es 
    return /android|iphone|ipad|ipod/i.test(userAgent) && window.matchMedia('(display-mode: standalone)').matches;
  }

  window.loginWithGoogle = async function () {
    try {
      if (isRunningInWebView()) {
        console.log("Usando signInWithRedirect() para WebView en Android/iOS");
        await signInWithRedirect(auth, provider);
      } else {
        console.log("Usando signInWithPopup() para navegadores web");
        const result = await signInWithPopup(auth, provider);
        console.log("Usuario autenticado:", result.user);
        // alert("Sesión iniciada con éxito: " + result.user.displayName);
      }
    } catch (error) {
      console.error("Error en la autenticación con Google:", error);
      // alert("Error al iniciar sesión");
    }
  };
</script>  
</head>

<body>
  <app-root></app-root>
</body>

</html>
